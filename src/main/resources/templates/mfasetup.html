<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:insert="fragments/head :: head">
    <title>Set Up MFA</title>

    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
</head>

<body>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-8">
            <div class="mfa-container">
                <h2 class="mfa-header">Enable Multi-Factor Authentication</h2>
                <p class="mfa-instructions">Secure your account by setting up MFA. Follow these steps:</p>
                <ol class="mfa-steps">
                    <li><i class="fas fa-mobile-alt"></i> Open your&nbsp;<span class="mfa-bold-text">Authenticator app</span>&nbsp;on your mobile device.</li>
                    <li><i class="fas fa-plus-circle"></i> Tap on the&nbsp;<span class="mfa-bold-text"> + </span>&nbsp;icon to add a new account.</li>
                    <li><i class="fas fa-key"></i> Select the&nbsp;<span class="mfa-bold-text"> Other (Google, Facebook, etc.)</span>&nbsp;option.</li>
                    <li><i class="fas fa-qrcode"></i> <span class="mfa-bold-text">Scan the QR code on VaxApp</span>.</li>
                    <li><i class="fas fa-camera"></i> Use your device's camera to&nbsp;<span class="mfa-bold-text">Scan the QR code</span>&nbsp;displayed below:</li>
                </ol>

                <div class="qr-code" th:if="${qrUrl}">
                    <img th:src="${qrUrl}" alt="QR Code" />
                </div>

                <h5 class="text-center mb-4">After scanning, enter the code generated by your app to complete the setup.</h5>

                <form th:action="@{/verify-mfa}" method="post" class="form-group-mfa">
                    <!-- CSRF token is automatically included by Thymeleaf -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <input type="text" id="otp" name="otp" class="form-control form-control-lg text-center"
                           placeholder="Enter OTP" required pattern="\d*" maxlength="6"
                           oninput="this.value = this.value.replace(/[^0-9]/g, '');" />
                    <button type="submit" class="btn btn-verify-mfa mt-4">Verify</button>
                </form>
            </div>
        </div>
    </div>
</div>
<footer th:insert="fragments/footer :: footer"></footer>
</body>
</html>
